<div bsModal #modal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title pull-left">
          Subir fotografías
        </h4>
        <button type="button" class="close pull-right" (click)="modal.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>

      </div>
      <div class="modal-body">
        <section class="example-section">
          <md-checkbox [(ngModel)]="takeTitleFromFiles" color="#3D8EB9">
            Obtener título de archivo
          </md-checkbox>
          <input class="input-picture"
                 image-upload (imageSelected)="selected($event)"
                 accept="image/*" name="picture" type="file" multiple>
        </section>


          <div *ngFor="let picture of pictures; let i = index"
               class="picture-form-container">
            <section class="lock" [class.uploading]="i === currentUploadingPicture && uploading">
              <i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i>
            </section>

            <section class="picture-container">
              <button md-mini-fab (click)="remove(picture)">
                <i class="fa fa-trash-o" aria-hidden="true"></i>
              </button>
              <picture *ngIf="picture.image" [ngStyle]="{
                'background-image' : 'url('+picture.src+')'
              }">
              </picture>
            </section>

            <section class="picture-form">
              <md-input-container>
                <input mdInput required
                       [(ngModel)]="picture.title"
                       (ngModelChange)="titleChanged(picture)"
                       placeholder="Título">
              </md-input-container>

              <!-- TODO Check when typing this -->
              <md-input-container>
                <input mdInput [(ngModel)]="picture.link"
                       placeholder="Titulo para enlace">
              </md-input-container>
              <md-input-container>
                <input mdInput [(ngModel)]="picture.description"
                       placeholder="Descripción"  >
              </md-input-container>
              <md-input-container>
                <input mdInput type="number" min="-90" max="90" step=".0000001"
                       [(ngModel)]="picture.latitude"
                       placeholder="Latitud">
              </md-input-container>
              <md-input-container>
                <input mdInput type="number" min="-180" max="180" step=".0000001"
                       [(ngModel)]="picture.longitude"
                       placeholder="Longitud">
              </md-input-container>
              <md-input-container>
                <input [ngModel]="picture.taken_at | date: 'short'"
                       name="taken_at"  mode="popup" mdInput
                       [(dateTimePicker)]="picture.taken_at" readonly
                       placeholder="Fecha en la que fue tomada"/>
              </md-input-container>
            </section>

          </div>
          <button md-button (click)="submit()">Subir fotografías</button>
      </div>
    </div>
  </div>
</div>

