<h4 md-dialog-title>
  {{createMode ? 'Subir fotografías': 'Editar fotografía'}}
</h4>

<button class="corner" tabindex="-1" md-dialog-close>
  <span aria-hidden="true">&times;</span>
</button>

<section class="header-form" *ngIf="createMode">
  <md-checkbox [(ngModel)]="takeTitleFromFiles" >
    Obtener título de archivo
  </md-checkbox>
  <input class="input-picture"
         image-upload (imageSelected)="selected($event)"
         accept="image/*" name="picture" type="file" multiple>
</section>

<md-dialog-content>
  <form id="picture-form" [formGroup]="formGroup" (ngSubmit)="submit()">
    <div formArrayName="pictures">
      <md-card *ngFor="let picture of formArray.controls; let i=index"
               [formGroupName]="i">
        <app-picture-form [picture]="picture"
                          [uploading]="i === currentUploadingPicture && uploading"
                          (coordsRequested)="openMapModal($event)"
                          >
        </app-picture-form>
        <button *ngIf="createMode"
                type="button" md-mini-fab class="remove"
                (click)="remove(picture)">
          <i class="fa fa-trash-o" aria-hidden="true"></i>
        </button>
      </md-card>
    </div>
  </form>
</md-dialog-content>

<md-dialog-actions>
  <button md-button form="picture-form">
    <ng-container *ngIf="createMode; else elseCreateMode">
      Subir fotografías
    </ng-container>
    <ng-template #elseCreateMode>
      Actualizar fotografía
    </ng-template>
  </button>
</md-dialog-actions>
