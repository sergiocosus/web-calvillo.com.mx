<ng-container [formGroup]="picture">
  <section class="lock" [class.uploading]="uploading">
    <md-spinner></md-spinner>
  </section>

  <section class="picture-container">
    <picture *ngIf="picture.get('src').value"
             [ngStyle]="{
                    'background-image' : 'url('+picture.get('src').value+')'
                  }"></picture>
  </section>

  <section class="picture-form">
    <md-input-container>
      <input mdInput required formControlName="title"
             placeholder="Título"/>
    </md-input-container>

    <md-input-container>
      <input mdInput formControlName="link"
             placeholder="Titulo para enlace"/>
      <md-hint *ngIf="picture.get('linkUsed').value" class="error">
        El link esta siendo utilizado, cambielo por otro
      </md-hint>
    </md-input-container>

    <md-input-container>
      <input mdInput formControlName="description"
             placeholder="Descripción"/>
    </md-input-container>

    <section class="coordinates">
      <a class="map" (click)="coordsRequested.emit(picture)">
        <i class="fa fa-map-marker"></i>
      </a>
      <md-input-container>
        <input mdInput type="number" step=".0000001" formControlName="latitude"
               placeholder="Latitud">
        <md-hint align="end">adsdsds</md-hint>

      </md-input-container>
      <md-input-container>
        <input mdInput type="number"
               formControlName="longitude"
               placeholder="Longitud">
      </md-input-container>
    </section>
    <md-input-container>
      <input [value]="picture.get('taken_at').value | date: 'short'"
             mode="popup" mdInput readonly
             [dateTimePicker]="picture.get('taken_at').value"
             (dateTimePickerChange)="picture.patchValue({taken_at: $event})"
             placeholder="Fecha en la que fue tomada"/>
    </md-input-container>

    <md-select formControlName="categories" placeholder="Categorias"
    [multiple]="true">
      <md-option *ngFor="let category of categories" [value]="category">
        {{category.category ? category.category.title : ''}}
        / {{category.title}}
      </md-option>
    </md-select>
  </section>
</ng-container>
